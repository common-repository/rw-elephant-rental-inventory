function rweWhichTransitionEvent(){var a,b=document.createElement("fakeelement"),c={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(a in c)if(void 0!==b.style[a])return c[a]}!function(a){var b=rweWhichTransitionEvent(),c={init:function(){a.featherlight(a(".rwe-walkthrough"),{variant:"rw-elephant-walkthrough",afterOpen:function(){setTimeout(function(){a(".rw-elephant-walkthrough > .featherlight-content").css("opacity",0).addClass("animated fadeInDown")},5);var b=1;a(".rw-elephant-walkthrough > .featherlight-content").find('input[type="text"], select, a.js-go-to-step').each(function(){a(this).attr("tabindex",b++)})}})},goToStep:function(d,e){var f="next"===e?d-1:d+1,g="next"===e?"fadeOutLeft":"fadeOutRight",h="next"===e?"fadeInRight":"fadeInLeft";if(!c.checkRequiredFields(".step-"+f)){if("finish"===e)return void c.completeSetup({tenantID:a(".featherlight-content #tenant-id").val().trim(),apiKey:a(".featherlight-content #api-key").val().trim(),galleryPage:a(".featherlight-content #gallery-page").val(),wishlistPage:a(".featherlight-content #wishlist-page").val()});a(".rwe-preloader").fadeTo(1e3,1),a(".step-"+f).addClass("animated "+g).one(b,function(c){var e={action:"next_step",step:d};2===f&&3===d&&(e.tenantID=a(".featherlight-content #tenant-id").val().trim(),e.apiKey=a(".featherlight-content #api-key").val().trim()),jQuery.post(ajaxurl,e,function(c){if(a(".step-2").find(".connection-error").html("").addClass("hidden"),!c.success)return a(".rwe-preloader").fadeTo("fast",0),a(".step-2").find(".connection-error").html(c.data.error).removeClass("hidden"),void a(".step-2").addClass("animated fadeInLeft").one(b,function(){a(this).removeClass("animated fadeInLeft fadeOutLeft")});a(".step-"+f).addClass("hidden").removeClass("animated "+g),a(".rwe-preloader").fadeTo("fast",0),a(".step-"+d).removeClass("hidden").addClass("animated "+h).one(b,function(){a(this).removeClass("animated "+h)})})})}},checkRequiredFields:function(b){var c=!1;return a(b+" input").filter("[required]:visible").each(function(){if(!a(this).val()||""===a(this).val().trim())return c=!0,a(this).addClass("required-field"),!0;a(this).removeClass("required-field")}),c},completeSetup:function(c){a(".step-4").addClass("animated fadeOutLeft").one(b,function(d){a(".step-4").addClass("hidden").removeClass("animated fadeOutLeft"),a(".final-step > .rwe-preloader").fadeTo("fast",0),a(".final-step").removeClass("hidden").addClass("animated fadeInRight").one(b,function(){a(this).removeClass("animated fadeInRight");var b={action:"complete_plugin_setup",rw_plugin_data:c};jQuery.post(ajaxurl,b,function(b){if(a(".rwe-preloader-final").hide(),a(".final-step .current-step").html(rweWalkthroughData.complete),!b.success)return void a(".walkthrough-results").addClass("danger").html(b.data);a(".walkthrough-results").addClass("success").html(b.data)})})})}};a(document).on("ready",c.init),a(document).on("keyup","#tenant-id, #api-key",function(b){a(this).removeClass("required-field")}),a(document).on("click",".js-go-to-step",function(b){b.preventDefault(),c.goToStep(a(this).data("step"),a(this).data("type"))})}(jQuery);